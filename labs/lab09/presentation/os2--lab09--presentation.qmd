---
## Author
author:
  name: Гурбанов Сарча
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032244850@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа №9
subtitle: Управление SELinux
license: CC BY
date: 2026-02-10
## Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги
## Formats
format:
### Pdf output format
  beamer:
    pdf-engine: lualatex
    include-in-header: 
      text: |
        \usepackage{fontspec}
        \setmainfont{Noto Serif}
        \setsansfont{Noto Sans}
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: Madrid
#### Language
    babel-lang: russian
    babel-otherlangs: english
### Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

# Информация

## Докладчик

  * Гурбанов Сарча
  * студент 
  * Российский университет дружбы народов им. П. Лумумбы
  * [1032244850@rudn.ru](mailto:032244850@rudn.ru)
  * <https://gurbanovs.github.io/ru/>

## Цель работы

Получить навыки работы с контестом и политиками SELinux

# Выполнение  лабораторной работы

## В терминале от имени администратора вводим следующую команду `sestatus -v` для просмотра текущего состояния SELinux 
![](image/1.png)

## Вводим следующую команду `getenforce` для просмотра в каком режиме работает SELinux, вводим следующую команду `setenforce 0` чтобы задать новый режим для SELinux, и снова `getenforce` чтобы посмотреть изменения
![](image/2.png)

## С помощью редактора nano открываем следующий каталог `/etc/sysconfig/selinux`
![](image/3-4.5.png)

## В конфиге изменяем SELinux с `enforcing` на `disabled`
![](image/4.png)

## Вводим следующую команду `getenforce` для просмотра в каком режиме работает SELinux. Мы можем увидеть что сейчас он не активен и при попытке задать новый режим выходит сообщение что SELinux не активен
![](image/5.png)

## С помощью редактора nano открываем следующий каталог `/etc/sysconfig/selinux`. В конфиге изменяем SELinux с `disabled` на `enforcing`
![](image/6.png)

## Попытаемся перезаписать существующий файл hosts из домашнего каталога в каталог /etc с помощью команды `mv ~/hosts /etc`, и подвтердите это
![](image/7.png)

## Вводим следующую команду `restorecon -v /etc/hosts` для изменения контекста безопасности, -v покажет процесс изменения
![](image/8.png)

## Вводим следующую команду `ls -Z /etc/hosts` чтобы убедиться что контекст изменился
![](image/9.png)

## Устанавливаем пакет lynx
![](image/10.png)

## Создаем новый каталог web и в нем же создаем новый файл index.html
![](image/11.png)

## С помощью nano добавляем туда данную строку `Welcome to my web-server`
![](image/12.png)

## Открываем `etc/httpd/conf/httpd.conf` с помощью текстового редактора nano
![](image/13.png)

## В нем комментируем следующие строки
`DocumentRoot "/var/www/html"`
`<Directory "/var/www>"`
`	AllowOverride None`
`	Allow open acces:`
`	Require all granted`
`</Directory>`
## И вставляем следующие
`DocumentRoot "/web"`
`<Directory "/web>"`
`	AllowOverride None`
`	Require all granted`
`</Directory>`
![](image/14.png)

## Запускаем веб-сервер и службу httpd с помощью команд `systemctl start httpd` и `systemctl enable httpd`  
![](image/15.png)

## Вводим `lynx http://localhost` чтобы открыть обращение к веб-серверу в текстовом браузере
![](image/16.png)

## Вы увидите веб-страницу Red Hat а не только что созданный index.html 
![](image/17.png)

## Вводим следующую команду для применения новой метки контекста `semanage fcontext -a -t httpd_sys_content_t "/web(/.*)?"`. Вводим следующую команду для востановления контекста безопасности
![](image/18.png)

## Вводим `lynx http://localhost` чтобы открыть обращение к веб-серверу в текстовом браузере
![](image/20.png)

## Мы можем увидеть сообщение из нашего `index.html`
![](image/19.png)

## Вводим следующую команду `getsebool -a | grep ftp` для просмотра списка переключателей SELinux для службы FTP 
![](image/21.png)

## Вводим следующую команду `semanage boolean -l | grep ftpd_anon` для просмотра состояния службы ftpd_anon. 
![](image/22.png)

## Вводим следующую команду `setsebool ftpd_anon_write on` для переключения текущей службы с  off на on, так же с помощью команды `getsebool ftpd_anon_write` смотрим на список переключателей SELinux. Вводим следующую команду `semanage boolean -l | grep ftpd_anon` для просмотра состояния службы и видим что теперь текущее состяние из выкл стала вкл
![](image/23.png)

## Вводим следующую команду `setsebool -P ftpd_anon_write on` для переключения постоянной службы с  off на on. Вводим следующую команду `semanage boolean -l | grep ftpd_anon` для просмотра состояния службы и видим что теперь постоянное состяние из выкл стала вкл 
![](image/24.png)

## Вывод

Я получил навыки работы с контекстом безопасности и полтиками SELinux
